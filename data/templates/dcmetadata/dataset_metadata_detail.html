{% extends "admin/admin_base_site.html" %}
{% load i18n admin_static admin_modify %}
{% load custom_filter %}
{% load custom_tag %}

{% block extrahead %}
	{{ block.super }}
		<!-- CSS -->
		<link href="{{ MEDIA_URL }}css/third_party/JQuery/default.css" rel="stylesheet" type="text/css" media="screen" />
		<link rel="stylesheet" type="text/css" href="{{STATIC_RUL}}admin/css/forms.css"/>
		<style type="text/css">
			.delete-link {
				float:left;
				padding-left:18px;
				margin-left:100px;
				background:url({{ MEDIA_URL }}images/icon_delete.gif) no-repeat left center;
			}
			.edit-link {
				float:left;
				padding-left:18px;
				background:url({{ MEDIA_URL }}images/icon_edit.gif) no-repeat left center;
			}
			.delete-row {
				float:right;
				display:block;
				margin-left:4px;
				padding-left:18px;
				background:url({{ MEDIA_URL }}images/delete.png) no-repeat left center;
			}
			
			.metadata_detail{
				display:block;
				margin-left:30px;
			}
			
			.metadata_detail hr{
				width:90%;
				float:left;
			}
			
			.metadata_detail_sub_tags{
				display:block;
				margin-left:20px;
			}
			
			.dynamic-fields-form th {
				text-align:right;
				font-weight:bold;
			}
			.dynamic-fields-form td span img {
				vertical-align:middle;
				border:0;
			}
			
			.dynamic-other-form th {
				text-align:right;
				font-weight:bold;
			}
			.dynamic-other-form td span img {
				vertical-align:middle;
				border:0;
			}
			
			table{
				border: 0px solid;
				border-bottom-width: 1px;
				padding: 10px;
				margin: 20px;
			}
			
			.errornote{
				font-size: 12px !important;
				display: block;
				padding: 4px 5px 4px 25px;
				margin: 0 0 3px 0;
				border: 1px solid red;
				color: red;
				background: #FFC url({{ MEDIA_URL }}images/icon_error.png) 5px .3em no-repeat;
				line-height: 14px;
			}
			
			.errorlist li{
				font-size: 12px !important;
				display: block;
				padding: 4px 5px 4px 25px;
				margin: 0 0 3px 0;
				border: 1px solid red;
				color: white;
				background: red url({{ MEDIA_URL }}images/icon_errormsg.png) 5px .3em no-repeat;
				line-height: 14px;
			}
			
			ul{
				display: block;
				-webkit-margin-before: 0px;
				-webkit-margin-after: 0px;
				-webkit-margin-start: 0px;
				-webkit-margin-end: 0px;
				-webkit-padding-start: 0px;
				margin-top: -23px !important;
			}
			div#metadata_tools
			{
				float:right;
			}
			div#metadata_json_content
			{
				display: block;
				margin-left: 30px;
			}
		</style>
{% endblock %}

{% block title %}Dataset ID {{dataset_id}} | {% trans 'Data Commons Source Data Metadata Management' %}{% endblock %}

{% block breadcrumbs %}
<div class="breadcrumbs">
<a href="{% setting 'APP_SERVER_URL' %}/admin/">{% trans 'Home' %}</a>
&rsaquo; <a href="{% setting 'APP_SERVER_URL' %}/admin/dcmetadata/">Dcmetadata</a>
&rsaquo; <a href="{% setting 'APP_SERVER_URL' %}/admin/dcmetadata/dataset/">Datasets</a>
&rsaquo; <a href="{% setting 'APP_SERVER_URL' %}/admin/dcmetadata/dataset/{{ dataset_id }}/">Dataset ID: {{dataset_id}}</a>
&rsaquo; Metadata
</div>
<br/><hr><br/>
{% endblock %}

{% block content %}
<div id="content-main">
	<h1>Dataset ID: {{dataset_id}}</h1>
	<div id="metadata_tools">
		<a class="edit-link" href="edit">Edit Dataset Metadata</a>
		<a class="delete-link" href="delete_confirm">Delete Dataset Metadata</a>
	</div>
	<br/><hr><br/>
	<div class="metadata_detail">
		<p><b>Title:</b> {{dataset.name}}</p>
		<p><b>NID:</b> {{dataset.nid}}</p>
		<p>
		<b>Tables:</b> 
		{% for t in dataset.tables.all %}
			{% if forloop.counter > 1 %}, {% endif %}<a target="_blank" class="sourcedata-link" href="{% setting 'APP_SERVER_URL' %}/admin/dcmetadata/sourcedatainventory/{{ t.id }}/">{{ t }}</a>
		{% endfor %}
		</p>
		<p>
		<b>Tags:</b> 
		{% for t in dataset.tags.all%}
			{% if forloop.counter > 1 %}, {% endif %}{{ t }}
		{% endfor %}
		</p>
		<p><b>IS Large Dataset? :</b> {% if dataset.large_dataset == 0 %} No {% else %} Yes {% endif %}<br/></p>
	</div>
	<br/><hr><br/>
	<h1>Metadata JSON</h1>
	<div id="metadata_json">
		dataset_metadata = <br/>
		{
		<div id="metadata_json_content">
			{% for key,value in dataset_metadata.items %}
				<p>
				"{{key}}":"{{ value }}",
				</p>
			{% endfor %}	
		</div>
		}
		<br/><br/><hr>
	</div>
	<br/>
	<div id="metadata_tools">
		<a class="edit-link" href="edit">Edit Dataset Metadata</a>
		<a class="delete-link" href="delete_confirm">Delete Dataset Metadata</a>
	</div>
</div>
{% endblock %}